{"ast":null,"code":"var _jsxFileName = \"/Users/Phil/Desktop/Web Dev/Projects/stock-screener/src/components/radarscreen.component.jsx\";\nimport React from 'react';\nimport Dropdown from './dropdown.component';\nimport { SYMBOLS, INTERVALS } from '../assets/constants';\nimport './radarscreen.styles.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst urlRealTime = 'https://api.tdameritrade.com/v1/marketdata/quotes';\nconst apikey = 'APRKWXOAWALLEUMXPY1FCGHQZ5HDJGKD';\nconst headerConst = ['Symbol', 'Interval', 'Price'];\nconst selectTbl = {\n  Symbol: SYMBOLS,\n  Interval: INTERVALS\n}; // const retrieveData = () => {\n// \tconst symbol = SYMBOLS;\n// \tconst params = {apikey, symbol};\n// \tconst queryExt = new URLSearchParams(params).toString();\n// \tconst queryString = urlRealTime.concat('?', queryExt);\n// \tfetch(queryString)\n// \t\t.then(response => response.json())\n// \t\t.then(data => console.log(data))\n// }\n\nconst fetchRealTimeData = async symbol => {\n  const params = {\n    apikey,\n    symbol\n  };\n  const queryExt = new URLSearchParams(params).toString();\n  const queryString = urlRealTime.concat('?', queryExt);\n  const response = await fetch(queryString);\n\n  if (!response.ok) {\n    const message = `An error has occured: ${response.status}`;\n    throw new Error(message);\n  }\n\n  const data = await response.json();\n  return data;\n};\n\nclass RadarScreen extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.onChange = (updatedValue, headerCol, valueRow) => {\n      const stateKey = this.state.header[headerCol];\n      const values = [...this.state[stateKey]];\n      const prices = [...this.state.Price];\n      values[valueRow] = updatedValue; // console.log('change', stateKey, updatedValue, this.state.header[headerCol], valueRow);\n\n      let symbol = updatedValue,\n          interval = updatedValue;\n\n      if (stateKey === 'Symbol') {\n        interval = this.state.Interval[valueRow];\n      } else if (stateKey === 'Interval') {\n        symbol = this.state.Symbol[valueRow];\n      } // console.log('symbol', symbol, 'interval', interval);\n\n\n      fetchRealTimeData(symbol).then(data => {\n        const lastPrice = data[symbol].lastPrice;\n        console.log(lastPrice);\n        prices[valueRow] = lastPrice;\n        console.log(prices); // this.setState({\n        // \tPrice: values\n        // }\n      }).catch(e => {\n        console.log('An error occurred during fetching: ' + e.message);\n      });\n      console.log('after');\n      this.setState({\n        [stateKey]: values\n      } // , () => {\n      // console.log('updated state',this.state[stateKey])\n      // }\n      );\n    };\n\n    this.state = {\n      header: headerConst,\n      Symbol: ['SPX', '@ES', '@NQ', 'SPY'],\n      Interval: ['Daily', 'Daily', '5 Min', 'Hourly'],\n      Price: [3, 6, 8, 0]\n    };\n  }\n\n  // onChange = key => (updatedValue, headerCol, valueRow) => {\n  // \t// console.log('change', key, updatedValue, this.state.header[headerCol], valueRow);\n  // \tconst stateKey = this.state.header[headerCol];\n  // \tconst values = [...this.state[stateKey]];\n  // \t// console.log('values',values, stateKey);\n  // \tvalues[valueRow] = updatedValue;\n  // \t// console.log('updatedValue',values);\n  // \t// console.log('state', this.state[stateKey]);\n  // \tthis.setState({\n  // \t\t[stateKey]: values\n  // \t}\n  // \t// , () => console.log('updated state',this.state[stateKey])\n  // \t);\n  // }\n  render() {\n    let i = 0;\n    const {\n      header\n    } = this.state;\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"radarscreen\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"space\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 137,\n        columnNumber: 5\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        id: \"grid-container\",\n        children: [header.map((value, colIdx) => {\n          i++;\n          return /*#__PURE__*/_jsxDEV(\"div\", {\n            id: i,\n            className: \"header\",\n            style: {\n              gridRow: 1,\n              gridColumn: colIdx + 1\n            },\n            children: value\n          }, i, false, {\n            fileName: _jsxFileName,\n            lineNumber: 144,\n            columnNumber: 9\n          }, this);\n        }), header.map((value, colIdx) => this.state[value].map((rowVal, rowIdx) => {\n          i++;\n\n          if (selectTbl[header[colIdx]] !== undefined) {\n            return /*#__PURE__*/_jsxDEV(Dropdown, {\n              options: selectTbl[header[colIdx]],\n              defaultValue: this.state[header[colIdx]][rowIdx],\n              style: {\n                gridRow: rowIdx + 2,\n                gridColumn: colIdx + 1\n              },\n              id: i // onChange={this.onChange(i)}\n              ,\n              onChange: this.onChange\n            }, i, false, {\n              fileName: _jsxFileName,\n              lineNumber: 163,\n              columnNumber: 11\n            }, this);\n          } else {\n            return /*#__PURE__*/_jsxDEV(\"div\", {\n              id: i,\n              className: \"item\",\n              style: {\n                gridRow: rowIdx + 2,\n                gridColumn: colIdx + 1\n              },\n              children: rowVal\n            }, i, false, {\n              fileName: _jsxFileName,\n              lineNumber: 178,\n              columnNumber: 11\n            }, this);\n          }\n        }))]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 139,\n        columnNumber: 5\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 136,\n      columnNumber: 4\n    }, this);\n  }\n\n}\n\nexport default RadarScreen;","map":{"version":3,"sources":["/Users/Phil/Desktop/Web Dev/Projects/stock-screener/src/components/radarscreen.component.jsx"],"names":["React","Dropdown","SYMBOLS","INTERVALS","urlRealTime","apikey","headerConst","selectTbl","Symbol","Interval","fetchRealTimeData","symbol","params","queryExt","URLSearchParams","toString","queryString","concat","response","fetch","ok","message","status","Error","data","json","RadarScreen","Component","constructor","props","onChange","updatedValue","headerCol","valueRow","stateKey","state","header","values","prices","Price","interval","then","lastPrice","console","log","catch","e","setState","render","i","map","value","colIdx","gridRow","gridColumn","rowVal","rowIdx","undefined"],"mappings":"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","sourcesContent":["import React from 'react';\n\nimport Dropdown from './dropdown.component';\n\nimport { SYMBOLS, INTERVALS } from '../assets/constants';\n\nimport './radarscreen.styles.css';\n\nconst urlRealTime = 'https://api.tdameritrade.com/v1/marketdata/quotes';\nconst apikey = 'APRKWXOAWALLEUMXPY1FCGHQZ5HDJGKD';\n\nconst headerConst = ['Symbol', 'Interval', 'Price']\n\nconst selectTbl = {\n\tSymbol: SYMBOLS,\n\tInterval: INTERVALS\n}\n\n// const retrieveData = () => {\n\n// \tconst symbol = SYMBOLS;\n// \tconst params = {apikey, symbol};\n\t\n// \tconst queryExt = new URLSearchParams(params).toString();\n// \tconst queryString = urlRealTime.concat('?', queryExt);\n\n// \tfetch(queryString)\n// \t\t.then(response => response.json())\n// \t\t.then(data => console.log(data))\n// }\n\nconst fetchRealTimeData = async (symbol) => {\n\tconst params = {apikey, symbol};\n\t\n\tconst queryExt = new URLSearchParams(params).toString();\n\tconst queryString = urlRealTime.concat('?', queryExt);\n\n\tconst response = await fetch(queryString);\n\n\tif (!response.ok) {\n\t\tconst message = `An error has occured: ${response.status}`;\n\t\tthrow new Error(message);\n\t}\n\n\tconst data = await response.json();\n\n\treturn data;\n}\n\nclass RadarScreen extends React.Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis.state = {\n\t\t\theader: headerConst,\n\t\t\tSymbol: ['SPX', '@ES', '@NQ', 'SPY'],\n\t\t\tInterval: ['Daily', 'Daily', '5 Min', 'Hourly'],\n\t\t\tPrice: [3, 6, 8, 0]\n\t\t}\n\t}\n\n\tonChange = (updatedValue, headerCol, valueRow) => {\n\n\t\tconst stateKey = this.state.header[headerCol];\n\t\tconst values = [...this.state[stateKey]];\n\t\tconst prices = [...this.state.Price];\n\n\t\tvalues[valueRow] = updatedValue;\n\n\t\t// console.log('change', stateKey, updatedValue, this.state.header[headerCol], valueRow);\n\t\t\n\t\tlet symbol = updatedValue, interval = updatedValue;\n\t\tif (stateKey==='Symbol') {\n\t\t\tinterval = this.state.Interval[valueRow];\n\t\t}\n\t\telse if (stateKey==='Interval'){\n\t\t\tsymbol = this.state.Symbol[valueRow];\n\t\t}\n\n\t\t// console.log('symbol', symbol, 'interval', interval);\n\n\t\tfetchRealTimeData(symbol)\n\t\t\t.then(data => {\n\t\t\t\tconst lastPrice = data[symbol].lastPrice;\n\t\t\t\tconsole.log(lastPrice);\n\n\t\t\t\tprices[valueRow] = lastPrice;\n\n\t\t\t\tconsole.log(prices);\n\t\t\t\t// this.setState({\n\t\t\t\t// \tPrice: values\n\t\t\t\t// }\n\n\t\t\t})\n\t\t\t.catch(e => {\n\t\t\t\tconsole.log('An error occurred during fetching: ' + e.message);\n\t\t  \t});\n\n\t\tconsole.log('after')\n\n\t\tthis.setState({\n\t\t\t[stateKey]: values\n\t\t}\n\t\t// , () => {\n\t\t\t// console.log('updated state',this.state[stateKey])\n\t\t// }\n\t\t);\n\n\n\t}\n\n\t// onChange = key => (updatedValue, headerCol, valueRow) => {\n\t// \t// console.log('change', key, updatedValue, this.state.header[headerCol], valueRow);\n\n\t// \tconst stateKey = this.state.header[headerCol];\n\t// \tconst values = [...this.state[stateKey]];\n\n\t// \t// console.log('values',values, stateKey);\n\t// \tvalues[valueRow] = updatedValue;\n\n\t// \t// console.log('updatedValue',values);\n\t// \t// console.log('state', this.state[stateKey]);\n\n\t// \tthis.setState({\n\t// \t\t[stateKey]: values\n\t// \t}\n\t// \t// , () => console.log('updated state',this.state[stateKey])\n\t// \t);\n\t// }\n\n\trender() {\n\tlet i=0;\n\n\tconst { header } = this.state;\n\n\t\treturn(\n\t\t\t<div className=\"radarscreen\">\n\t\t\t\t<div className='space'></div>\n\t\t\t\t\n\t\t\t\t<div id=\"grid-container\">\n\t\t\t\t\t{\n\t\t\t\t\t\theader.map((value, colIdx) => {\n\t\t\t\t\t\t\ti++;\n\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t<div \n\t\t\t\t\t\t\t\t\tkey={i} \n\t\t\t\t\t\t\t\t\tid={i} \n\t\t\t\t\t\t\t\t\tclassName='header'\n\t\t\t\t\t\t\t\t\tstyle={{ \n\t\t\t\t\t\t\t\t\t\tgridRow: 1,\n\t\t\t\t\t\t\t\t\t\tgridColumn: colIdx+1}}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t{value}\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t})\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\t{\n\t\t\t\t\t\theader.map((value, colIdx) => this.state[value].map((rowVal,rowIdx) => {\n\t\t\t\t\t\t\t\ti++;\n\t\t\t\t\t\t\t\tif(selectTbl[header[colIdx]] !== undefined) {\n\t\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\t\t<Dropdown \n\t\t\t\t\t\t\t\t\t\t\toptions={selectTbl[header[colIdx]]}\n\t\t\t\t\t\t\t\t\t\t\tdefaultValue={this.state[header[colIdx]][rowIdx]}\n\t\t\t\t\t\t\t\t\t\t\tstyle={{ \n\t\t\t\t\t\t\t\t\t\t\t\tgridRow: rowIdx+2,\n\t\t\t\t\t\t\t\t\t\t\t\tgridColumn: colIdx+1}}\n\t\t\t\t\t\t\t\t\t\t\tkey={i} \n\t\t\t\t\t\t\t\t\t\t\tid={i} \n\t\t\t\t\t\t\t\t\t\t\t// onChange={this.onChange(i)}\n\t\t\t\t\t\t\t\t\t\t\tonChange={this.onChange}\n\t\t\t\t\t\t\t\t\t\t/> \n\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\telse {\n\t\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\t\t<div \n\t\t\t\t\t\t\t\t\t\t\tkey={i} \n\t\t\t\t\t\t\t\t\t\t\tid={i} \n\t\t\t\t\t\t\t\t\t\t\tclassName='item'\n\t\t\t\t\t\t\t\t\t\t\tstyle={{ \n\t\t\t\t\t\t\t\t\t\t\t\tgridRow: rowIdx+2,\n\t\t\t\t\t\t\t\t\t\t\t\tgridColumn: colIdx+1}}\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t{rowVal}\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t) \n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t</div>\n\t\t</div>\n\t\t)\n\t}\n}\n\n\nexport default RadarScreen;"]},"metadata":{},"sourceType":"module"}