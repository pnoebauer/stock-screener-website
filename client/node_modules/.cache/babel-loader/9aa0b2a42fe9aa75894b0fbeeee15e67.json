{"ast":null,"code":"var _jsxFileName = \"/Users/Phil/Desktop/Web Dev/Projects/stock-screener/src/components/radarscreen/radarscreen.component.jsx\";\nimport React from 'react';\nimport ScreenHeader from '../screen-heading/screen-heading.component';\nimport Dropdown from '../dropdown/dropdown.component';\nimport ValueCell from '../screen-value-cell/screen-value-cell.component';\nimport { SYMBOLS, INTERVALS, SP500 } from '../../assets/constants';\nimport './radarscreen.styles.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst urlRealTime = 'https://api.tdameritrade.com/v1/marketdata/quotes';\nconst apikey = 'APRKWXOAWALLEUMXPY1FCGHQZ5HDJGKD';\nconst headerConst = ['Symbol', 'Interval', 'Price'];\nconst selectTbl = {\n  Symbol: SYMBOLS,\n  Interval: INTERVALS\n};\n\nconst fetchRealTimeData = async symbol => {\n  const params = {\n    apikey,\n    symbol\n  };\n  const queryExt = new URLSearchParams(params).toString();\n  const queryString = urlRealTime.concat('?', queryExt);\n  const response = await fetch(queryString);\n\n  if (!response.ok) {\n    const message = `An error has occured: ${response.status}`;\n    throw new Error(message);\n  }\n\n  const data = await response.json();\n  return data;\n};\n\nconst sortTableO = list => {\n  // const list = [...this.state[sortedField]]\n  console.log(list); // temporary array holds objects with position and sort-value\n\n  const mapped = list.map((value, index) => {\n    if (typeof value === 'string') value = value.toLowerCase();\n    return {\n      index,\n      value\n    };\n  });\n  console.log(mapped); // sorting the mapped array containing the reduced values\n\n  mapped.sort(function (a, b) {\n    if (a.value > b.value) {\n      return 1;\n    }\n\n    if (a.value < b.value) {\n      return -1;\n    }\n\n    return 0;\n  });\n  console.log(mapped); // container for the resulting order\n\n  const result = mapped.map(element => list[element.index]);\n  console.log(result);\n};\n\nconst sortTable = (stateClone, sortedField) => {\n  const list = [...stateClone[sortedField]];\n  console.log(list); // temporary array holds objects with position and sort-value\n\n  const mapped = list.map((value, index) => {\n    if (typeof value === 'string') value = value.toLowerCase();\n    return {\n      index,\n      value\n    };\n  });\n  console.log(mapped); // sorting the mapped array containing the reduced values\n\n  mapped.sort((a, b) => {\n    if (a.value > b.value) {\n      return 1;\n    }\n\n    if (a.value < b.value) {\n      return -1;\n    }\n\n    return 0;\n  });\n  console.log(mapped);\n  return mapped; // container for the resulting order\n  // const result = mapped.map(element => list[element.index]);\n  // const result = mapped.map(element => {\n  // \t// list[element.index]\n  // \tconst Price = stateClone.Price[element.index];\n  // \tconst Interval = stateClone.Interval[element.index]\n  // \tconst Symbol = stateClone.Symbol[element.index]\n  // \tconst keys = Object.keys(stateClone)\n  // \treturn {\n  // \t\t...stateClone,\n  // \t\tPrice,\n  // \t\tInterval,\n  // \t\tSymbol\n  // \t}\n  // });\n  // console.log(result)\n};\n\nclass RadarScreen extends React.PureComponent {\n  constructor(props) {\n    super(props);\n\n    this.onChange = (updatedValue, headerCol, valueRow) => {\n      const stateKey = this.state.header[headerCol];\n      const values = [...this.state[stateKey]];\n      const prices = [...this.state.Price];\n      values[valueRow] = updatedValue; // console.log('change', stateKey, updatedValue, this.state.header[headerCol], valueRow);\n\n      let symbol = updatedValue,\n          interval = updatedValue;\n\n      if (stateKey === 'Symbol') {\n        interval = this.state.Interval[valueRow];\n      } else if (stateKey === 'Interval') {\n        symbol = this.state.Symbol[valueRow];\n      } // console.log('symbol', symbol, 'interval', interval);\n\n\n      fetchRealTimeData(symbol).then(data => {\n        const lastPrice = data[symbol].lastPrice; // console.log(lastPrice);\n\n        prices[valueRow] = lastPrice; // console.log(prices);\n\n        this.setState({\n          Price: prices\n        });\n      }).catch(e => {\n        console.log('An error occurred during fetching: ' + e.message);\n      });\n      this.setState({\n        [stateKey]: values\n      });\n    };\n\n    this.state = {\n      header: headerConst,\n      Symbol: SP500.slice(0, 8),\n      Interval: Array(8).fill(INTERVALS[0]),\n      Price: Array(8).fill(0)\n    };\n  }\n\n  componentDidMount() {\n    const {\n      Symbol\n    } = this.state;\n    fetchRealTimeData(Symbol).then(data => {\n      const prices = Symbol.map((symbolName, index) => {\n        return data[symbolName].lastPrice;\n      }); // console.log(prices);\n\n      this.setState({\n        Price: prices\n      } // () => console.log(this.state)\n      );\n    });\n  }\n\n  render() {\n    const {\n      header\n    } = this.state;\n    const sortedField = 'Price'; // const list = [...this.state[sortedField]]\n    // sortTable(list);\n\n    const stateClone = { ...this.state\n    };\n    const mapped = sortTable(stateClone, sortedField); // const result = mapped.map(element => list[element.index]);\n\n    const Price = stateClone.Price;\n    const orderedPrice = mapped.map(element => Price[element.index]);\n    const Interval = stateClone.Interval;\n    const orderedInterval = mapped.map(element => Interval[element.index]);\n    const Symbol = stateClone.Symbol;\n    const orderedSymbol = mapped.map(element => Symbol[element.index]);\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"radarscreen\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"space\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 235,\n        columnNumber: 5\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        id: \"grid-container\",\n        children: [header.map((value, colIdx) => /*#__PURE__*/_jsxDEV(ScreenHeader, {\n          gridColumn: colIdx + 1,\n          children: value\n        }, colIdx.toString(), false, {\n          fileName: _jsxFileName,\n          lineNumber: 240,\n          columnNumber: 9\n        }, this)), //loop through the header items (columns) and afterwards loop through stored values (rows)  \n        header.map((value, colIdx) => this.state[value].map((rowVal, rowIdx) => {\n          if (selectTbl[header[colIdx]] !== undefined) {\n            return /*#__PURE__*/_jsxDEV(Dropdown, {\n              options: selectTbl[header[colIdx]],\n              defaultValue: this.state[header[colIdx]][rowIdx],\n              gridRow: rowIdx + 2,\n              gridColumn: colIdx + 1,\n              onChange: this.onChange\n            }, colIdx.toString() + rowIdx.toString(), false, {\n              fileName: _jsxFileName,\n              lineNumber: 255,\n              columnNumber: 11\n            }, this);\n          } else {\n            return /*#__PURE__*/_jsxDEV(ValueCell, {\n              gridRow: rowIdx + 2,\n              gridColumn: colIdx + 1,\n              children: rowVal\n            }, colIdx.toString() + rowIdx.toString(), false, {\n              fileName: _jsxFileName,\n              lineNumber: 267,\n              columnNumber: 11\n            }, this);\n          }\n        }))]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 237,\n        columnNumber: 5\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 234,\n      columnNumber: 4\n    }, this);\n  }\n\n}\n\nexport default RadarScreen;","map":{"version":3,"sources":["/Users/Phil/Desktop/Web Dev/Projects/stock-screener/src/components/radarscreen/radarscreen.component.jsx"],"names":["React","ScreenHeader","Dropdown","ValueCell","SYMBOLS","INTERVALS","SP500","urlRealTime","apikey","headerConst","selectTbl","Symbol","Interval","fetchRealTimeData","symbol","params","queryExt","URLSearchParams","toString","queryString","concat","response","fetch","ok","message","status","Error","data","json","sortTableO","list","console","log","mapped","map","value","index","toLowerCase","sort","a","b","result","element","sortTable","stateClone","sortedField","RadarScreen","PureComponent","constructor","props","onChange","updatedValue","headerCol","valueRow","stateKey","state","header","values","prices","Price","interval","then","lastPrice","setState","catch","e","slice","Array","fill","componentDidMount","symbolName","render","orderedPrice","orderedInterval","orderedSymbol","colIdx","rowVal","rowIdx","undefined"],"mappings":"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","sourcesContent":["import React from 'react';\n\nimport ScreenHeader from '../screen-heading/screen-heading.component';\nimport Dropdown from '../dropdown/dropdown.component';\nimport ValueCell from '../screen-value-cell/screen-value-cell.component';\n\nimport { SYMBOLS, INTERVALS, SP500 } from '../../assets/constants';\n\nimport './radarscreen.styles.css';\n\nconst urlRealTime = 'https://api.tdameritrade.com/v1/marketdata/quotes';\nconst apikey = 'APRKWXOAWALLEUMXPY1FCGHQZ5HDJGKD';\n\nconst headerConst = ['Symbol', 'Interval', 'Price']\n\nconst selectTbl = {\n\tSymbol: SYMBOLS,\n\tInterval: INTERVALS\n}\n\nconst fetchRealTimeData = async (symbol) => {\n\tconst params = {apikey, symbol};\n\t\n\tconst queryExt = new URLSearchParams(params).toString();\n\tconst queryString = urlRealTime.concat('?', queryExt);\n\n\tconst response = await fetch(queryString);\n\n\tif (!response.ok) {\n\t\tconst message = `An error has occured: ${response.status}`;\n\t\tthrow new Error(message);\n\t}\n\n\tconst data = await response.json();\n\n\treturn data;\n}\n\n\nconst sortTableO = (list) => {\n\t// const list = [...this.state[sortedField]]\n\t\n\tconsole.log(list);\n\n\t// temporary array holds objects with position and sort-value\n\tconst mapped = list.map((value, index) => {\n\t\tif(typeof(value) ==='string') value = value.toLowerCase();\n\t\t  \n\t\treturn { \n\t\t\t  index, \n\t\t\t  value \n\t\t\t};\n\t\t}\n\t);\n\n\tconsole.log(mapped);\n\n\t// sorting the mapped array containing the reduced values\n\tmapped.sort(function(a, b) {\n\t\tif (a.value > b.value) {\n\t\t\treturn 1;\n\t\t}\n\t\tif (a.value < b.value) {\n\t\t\treturn -1;\n\t\t}\n\t\treturn 0;\n\t});\n\n\tconsole.log(mapped);\n\n\t// container for the resulting order\n\tconst result = mapped.map(element => list[element.index]);\n\n\tconsole.log(result)\n}\n\n\nconst sortTable = (stateClone, sortedField) => {\n\t\n\tconst list = [...stateClone[sortedField]];\n\t\n\tconsole.log(list);\n\n\t// temporary array holds objects with position and sort-value\n\tconst mapped = list.map((value, index) => {\n\t\tif(typeof(value) ==='string') value = value.toLowerCase();\n\t\t  \n\t\treturn { \n\t\t\t  index, \n\t\t\t  value \n\t\t\t};\n\t\t}\n\t);\n\n\tconsole.log(mapped);\n\n\t// sorting the mapped array containing the reduced values\n\tmapped.sort((a, b) => {\n\t\tif (a.value > b.value) {\n\t\t\treturn 1;\n\t\t}\n\t\tif (a.value < b.value) {\n\t\t\treturn -1;\n\t\t}\n\t\treturn 0;\n\t});\n\n\tconsole.log(mapped);\n\n\treturn mapped;\n\n\t// container for the resulting order\n\t// const result = mapped.map(element => list[element.index]);\n\n\t// const result = mapped.map(element => {\n\t// \t// list[element.index]\n\t// \tconst Price = stateClone.Price[element.index];\n\t// \tconst Interval = stateClone.Interval[element.index]\n\t// \tconst Symbol = stateClone.Symbol[element.index]\n\n\t// \tconst keys = Object.keys(stateClone)\n\t\t\n\n\t// \treturn {\n\t// \t\t...stateClone,\n\t// \t\tPrice,\n\t// \t\tInterval,\n\t// \t\tSymbol\n\t// \t}\n\t// });\n\n\t// console.log(result)\n}\n\n\nclass RadarScreen extends React.PureComponent {\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis.state = {\n\t\t\theader: headerConst,\n\t\t\tSymbol: SP500.slice(0,8),\n\t\t\tInterval: Array(8).fill(INTERVALS[0]),\n\t\t\tPrice: Array(8).fill(0)\n\t\t}\n\t}\n\n\tcomponentDidMount() {\n\t\tconst { Symbol } = this.state;\n\n\t\tfetchRealTimeData(Symbol)\n\t\t\t.then(data => {\n\t\t\t\tconst prices = Symbol.map((symbolName, index) => {\n\t\t\t\t\treturn data[symbolName].lastPrice;\n\t\t\t\t})\n\t\t\t\t// console.log(prices);\n\t\t\t\tthis.setState({\n\t\t\t\t\tPrice: prices\n\t\t\t\t}\n\t\t\t\t,\n\t\t\t\t// () => console.log(this.state)\n\t\t\t\t);\n\t\t\t})\n\t}\n\n\tonChange = (updatedValue, headerCol, valueRow) => {\n\n\t\tconst stateKey = this.state.header[headerCol];\n\t\tconst values = [...this.state[stateKey]];\n\t\tconst prices = [...this.state.Price];\n\n\t\tvalues[valueRow] = updatedValue;\n\n\t\t// console.log('change', stateKey, updatedValue, this.state.header[headerCol], valueRow);\n\t\t\n\t\tlet symbol = updatedValue, interval = updatedValue;\n\t\tif (stateKey==='Symbol') {\n\t\t\tinterval = this.state.Interval[valueRow];\n\t\t}\n\t\telse if (stateKey==='Interval'){\n\t\t\tsymbol = this.state.Symbol[valueRow];\n\t\t}\n\n\t\t// console.log('symbol', symbol, 'interval', interval);\n\n\t\tfetchRealTimeData(symbol)\n\t\t\t.then(data => {\n\t\t\t\tconst lastPrice = data[symbol].lastPrice;\n\t\t\t\t// console.log(lastPrice);\n\n\t\t\t\tprices[valueRow] = lastPrice;\n\n\t\t\t\t// console.log(prices);\n\n\t\t\t\tthis.setState({\n\t\t\t\t\tPrice: prices\n\t\t\t\t});\n\n\t\t\t})\n\t\t\t.catch(e => {\n\t\t\t\tconsole.log('An error occurred during fetching: ' + e.message);\n\t\t  \t});\n\n\n\t\tthis.setState({\n\t\t\t[stateKey]: values\n\t\t});\n\t}\n\n\trender() {\n\n\t\tconst { header } = this.state;\n\n\t\tconst sortedField = 'Price';\n\t\t// const list = [...this.state[sortedField]]\n\n\t\t// sortTable(list);\n\n\t\tconst stateClone = {...this.state};\n\n\t\tconst mapped = sortTable(stateClone, sortedField);\n\n\t\t// const result = mapped.map(element => list[element.index]);\n\n\t\tconst Price = stateClone.Price;\n\t\tconst orderedPrice = mapped.map(element => Price[element.index]);\n\n\t\tconst Interval = stateClone.Interval;\n\t\tconst orderedInterval = mapped.map(element => Interval[element.index]);\n\n\t\tconst Symbol = stateClone.Symbol;\n\t\tconst orderedSymbol = mapped.map(element => Symbol[element.index]);\n\n\t\treturn(\n\t\t\t<div className=\"radarscreen\">\n\t\t\t\t<div className='space'></div>\n\t\t\t\t\n\t\t\t\t<div id=\"grid-container\">\n\t\t\t\t\t{\n\t\t\t\t\t\theader.map((value, colIdx) => (\n\t\t\t\t\t\t\t\t<ScreenHeader \n\t\t\t\t\t\t\t\t\tkey={colIdx.toString()} \n\t\t\t\t\t\t\t\t\tgridColumn={colIdx+1}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t{value}\n\t\t\t\t\t\t\t\t</ScreenHeader>\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t)\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\t{\n\t\t\t\t\t\t//loop through the header items (columns) and afterwards loop through stored values (rows)  \n\t\t\t\t\t\theader.map((value, colIdx) => this.state[value].map((rowVal,rowIdx) => {\n\t\t\t\t\t\t\t\tif(selectTbl[header[colIdx]] !== undefined) {\n\t\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\t\t<Dropdown \n\t\t\t\t\t\t\t\t\t\t\toptions={selectTbl[header[colIdx]]}\n\t\t\t\t\t\t\t\t\t\t\tdefaultValue={this.state[header[colIdx]][rowIdx]}\n\t\t\t\t\t\t\t\t\t\t\tgridRow={rowIdx+2}\n\t\t\t\t\t\t\t\t\t\t\tgridColumn={colIdx+1}\n\t\t\t\t\t\t\t\t\t\t\tkey={colIdx.toString()+rowIdx.toString()} \n\t\t\t\t\t\t\t\t\t\t\tonChange={this.onChange}\n\t\t\t\t\t\t\t\t\t\t/> \n\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\telse {\n\t\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\t\t<ValueCell \n\t\t\t\t\t\t\t\t\t\t\tkey={colIdx.toString()+rowIdx.toString()} \n\t\t\t\t\t\t\t\t\t\t\tgridRow={rowIdx+2}\n\t\t\t\t\t\t\t\t\t\t\tgridColumn={colIdx+1}\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t{rowVal}\n\t\t\t\t\t\t\t\t\t\t</ValueCell>\n\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t) \n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t</div>\n\t\t</div>\n\t\t)\n\t}\n}\n\n\nexport default RadarScreen;"]},"metadata":{},"sourceType":"module"}